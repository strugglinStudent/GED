<!-- Loader -->
<div class="absolute inset-x-0 top-0" *ngIf="loading">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>

<div
  class="flex flex-col justify-between w-full min-h-screen bg-slate-50 text-blue-700 md:shadow-lg rounded-lg"
>
  <div class="flex flex-col w-full justify-center mt-18">
    <div class="snap-align-none">
      <span class="text-blue-900 font-bold text-6xl mt-6 ml-6">Sign Up</span>
      <div class="ml-6 font-light mb-1 block mt-2 text-gray-600 text-4xl">Create your account</div>
    </div>
  </div>

  <div class="w-full px-5 py-1">
    <form #signUpNgForm="ngForm" (ngSubmit)="signUp(signUpNgForm)">
      <!-- Name field -->
      <div class="w-full mb-4">
        <input
          id="name"
          class="w-full border-b-2 border-blue-400 bg-blue-50 focus:border-blue-600 outline-none py-2"
          [(ngModel)]="newUser.name"
          name="name"
          type="text"
          placeholder="Name"
          [disabled]="loading"
          required
        />
        <div
          *ngIf="
            signUpNgForm.controls['name'] &&
            (signUpNgForm.controls['name'].dirty || signUpNgForm.submitted)
          "
        >
          <span
            *ngIf="signUpNgForm.controls['name'].hasError('required')"
            class="text-red-600 text-sm"
            >Name is required</span
          >
        </div>
      </div>

      <!-- company's name field -->
      <div class="w-full mb-4">
        <input
          id="company"
          class="w-full border-b-2 border-blue-400 bg-blue-50 focus:border-blue-600 outline-none py-2"
          [(ngModel)]="newUser.company"
          name="company"
          type="text"
          placeholder="company's name"
          [disabled]="loading"
          required
        />
        <div
          *ngIf="
            signUpNgForm.controls['company'] &&
            (signUpNgForm.controls['company'].dirty || signUpNgForm.submitted)
          "
        >
          <span
            *ngIf="signUpNgForm.controls['company'].hasError('required')"
            class="text-red-600 text-sm"
            >company's name is required</span
          >
        </div>
      </div>
      <!-- Email field -->
      <div class="w-full mb-4">
        <input
          id="email"
          class="w-full border-b-2 border-blue-400 bg-blue-50 focus:border-blue-600 outline-none py-2"
          [(ngModel)]="newUser.email"
          name="email"
          type="email"
          placeholder="Email"
          [disabled]="loading"
          [email]="true"
          required
        />
        <div
          *ngIf="
            signUpNgForm.controls['email'] &&
            (signUpNgForm.controls['email'].dirty || signUpNgForm.submitted)
          "
        >
          <span
            *ngIf="signUpNgForm.controls['email'].hasError('email')"
            class="text-red-600 text-sm"
            >The email is not correct</span
          >
          <span
            *ngIf="signUpNgForm.controls['email'].hasError('required')"
            class="text-red-600 text-sm"
            >Email is required</span
          >
        </div>
      </div>
      <!-- Password field -->
      <div class="w-full mb-6">
        <div class="relative">
          <input
            id="password"
            class="w-full border-b-2 border-blue-400 bg-blue-50 focus:border-blue-600 outline-none py-2"
            placeholder="Password"
            type="password"
            [(ngModel)]="newUser.password"
            name="password"
            [disabled]="loading"
            #passwordField
            pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s)(?=.*[<>.!@#$%^&*_=+]).{6,20}$"
            maxlength="20"
            required
          />
          <button
            [disabled]="loading"
            type="button"
            (click)="
              passwordField.type === 'password'
                ? (passwordField.type = 'text')
                : (passwordField.type = 'password')
            "
            class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"
          >
            <mat-icon
              class="h-5 w-5 text-gray-400"
              *ngIf="passwordField.type === 'password'"
              [svgIcon]="'heroicons_outline:eye'"
            ></mat-icon>
            <mat-icon
              class="h-5 w-5 text-gray-400"
              *ngIf="passwordField.type === 'text'"
              [svgIcon]="'heroicons_outline:eye-off'"
            ></mat-icon>
          </button>
        </div>
        <div
          *ngIf="
            signUpNgForm.controls['password'] &&
            (signUpNgForm.controls['password'].dirty || signUpNgForm.submitted)
          "
        >
          <span
            *ngIf="signUpNgForm.controls['password'].hasError('required')"
            class="text-red-600 text-sm"
            >Password is required</span
          >
          <span
            *ngIf="signUpNgForm.controls['password'].hasError('pattern')"
            class="text-red-600 text-sm"
            >Password must contain an upper case character, a lower case character, a number, and a
            special character</span
          >
        </div>
      </div>
      <!-- Confirm Password field -->
      <div class="w-full mb-6">
        <div class="relative">
          <input
            id="confirmPassword"
            class="w-full border-b-2 border-blue-400 bg-blue-50 focus:border-blue-600 outline-none py-2"
            placeholder="Confirm Password"
            type="password"
            [(ngModel)]="newUser.confirmPassword"
            name="confirmPassword"
            [disabled]="loading"
            #confirmPasswordField
            required
          />
          <button
            [disabled]="loading"
            type="button"
            (click)="
              confirmPasswordField.type === 'password'
                ? (confirmPasswordField.type = 'text')
                : (confirmPasswordField.type = 'password')
            "
            class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"
          >
            <mat-icon
              class="h-5 w-5 text-gray-400"
              *ngIf="confirmPasswordField.type === 'password'"
              [svgIcon]="'heroicons_outline:eye'"
            ></mat-icon>
            <mat-icon
              class="h-5 w-5 text-gray-400"
              *ngIf="confirmPasswordField.type === 'text'"
              [svgIcon]="'heroicons_outline:eye-off'"
            ></mat-icon>
          </button>
        </div>
        <div
          *ngIf="
            signUpNgForm.controls['confirmPassword'] &&
            (signUpNgForm.controls['confirmPassword'].dirty || signUpNgForm.submitted)
          "
        >
          <span
            *ngIf="signUpNgForm.controls['confirmPassword'].hasError('required')"
            class="text-red-600 text-sm"
            >Confirm Password is required</span
          >
          <span
            *ngIf="signUpNgForm.controls['confirmPassword'].hasError('compareWith')"
            class="text-red-600 text-sm"
            >Passwords do not match</span
          >
          <span *ngIf="newUser.password !== newUser.confirmPassword" class="text-red-600 text-sm"
            >Passwords do not match</span
          >
        </div>
      </div>
      <button
        class="w-full bg-blue-900 text-white py-2 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        [disabled]="loading"
        type="submit"
      >
        <span>Sign Up</span>
      </button>
    </form>
  </div>
  <div class="flex justify-center text-gray-600 text-base mt-2 mb-4">
    Already have an account?
    <a class="pl-1 text-blue-900 hover:text-blue-300 cursor-pointer" [routerLink]="['/sign-in']"
      >Login here!</a
    >
  </div>
  <hr class="w-full border-gray-300" />
  <div class="flex justify-center text-base text-gray-600 mt-2 mb-4">
    Version {{ environment?.version }}
  </div>
</div>
